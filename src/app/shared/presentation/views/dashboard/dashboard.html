<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-title">
      <h1>{{ 'dashboard.title' | translate }}</h1>
    </div>
  </header>

  <!-- KPIs Section -->
  <section class="kpis-section">
    @for (kpi of kpis(); track kpi.label) {
      <div class="kpi-card">
        <div class="kpi-icon">
          <svg class="icon">
            <use [attr.href]="'assets/icons/sprite.symbol.svg#' + kpi.icon"></use>
          </svg>
        </div>
        <div class="kpi-content">
          <div class="kpi-value">{{ kpi.value }}</div>
          <div class="kpi-label">{{ kpi.label | translate }}</div>
          <div class="kpi-change" [class.positive]="kpi.changePositive" [class.negative]="!kpi.changePositive">
            <span class="arrow">{{ kpi.changePositive ? '↑' : '↓' }}</span>
            {{ kpi.changePositive ? '+' : '' }}{{ kpi.change }}% {{ 'dashboard.kpis.vsPreviousMonth' | translate }}
          </div>
        </div>
      </div>
    }
  </section>

  <!-- Performance Chart Section -->
  <section class="chart-section">
    <h2>{{ 'dashboard.performanceChart.title' | translate }}</h2>
    <div class="chart-wrapper">
      <div class="chart-full-container">
        <div class="chart-y-axis">
          @for (label of yAxisLabels(); track $index) {
            <span class="y-axis-label">{{ label }}</span>
          }
        </div>

        <div class="chart-content">
          <div class="chart-grid">
            @for (_ of yAxisLabels(); track $index) {
              <div class="grid-line"></div>
            }
          </div>

          <div class="chart-bars">
            @for (data of chartData(); track data.label) {
              <div class="bar-container">
                <div
                  class="bar"
                  [style.height.%]="getBarHeight(data.value)"
                  [style.background-color]="data.color"
                  [attr.data-value]="data.value">
                </div>
                <span class="bar-label">{{ data.label }}</span>
              </div>
            }
          </div>
        </div>
      </div>

      <div class="chart-summary">
        <div class="summary-item">
          <span class="summary-label">{{ 'dashboard.performanceChart.summary.simulationsThisWeek' | translate }}:</span>
          <span class="summary-value">{{ chartSummary().total }}</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">{{ 'dashboard.performanceChart.summary.approved' | translate }}:</span>
          <span class="summary-value">{{ chartSummary().approved }} ({{ chartSummary().percentage }}%)</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Properties Section -->
  <section class="properties-section">
    <h2>{{ 'dashboard.properties.title' | translate }}</h2>
    <div class="properties-grid">
      <!-- Featured Property -->
      @if (featuredProperty(); as featured) {
        <div class="featured-property">
          <div class="property-image-placeholder">
            <svg class="icon-large">
              <use href="assets/icons/sprite.symbol.svg#home"></use>
            </svg>
          </div>
          <div class="property-content">
            <span class="featured-badge">{{ 'dashboard.properties.featured' | translate }}</span>
            <h3>{{ featured.project }}</h3>
            <p class="property-type">{{ featured.type }}</p>
            <p class="property-price">{{ formatCurrency(featured.price) }}</p>
            <p class="property-units">{{ featured.availability }} {{ 'dashboard.properties.available' | translate }}</p>
            <button class="btn-primary" (click)="viewPropertyDetail(featured.id)">
              {{ 'dashboard.properties.viewDetails' | translate }}
            </button>
          </div>
        </div>
      }


      <!-- Education Content -->
      <div class="education-card">
        <h3>{{ educationContent().title | translate }}</h3>
        <div class="education-cover">
          <svg class="icon-large">
            <use href="assets/icons/sprite.symbol.svg#file-type-pdf"></use>
          </svg>
        </div>
        <p class="education-description">{{ educationContent().description | translate }}</p>
        <button class="btn-download" (click)="downloadGuide()">
          <svg class="icon-small">
            <use href="assets/icons/sprite.symbol.svg#download"></use>
          </svg>
          {{ 'dashboard.education.download' | translate }}
        </button>
        <p class="education-date">{{ 'dashboard.education.updated' | translate }}: {{ educationContent().updateDate }}</p>
      </div>
    </div>
  </section>
</div>


